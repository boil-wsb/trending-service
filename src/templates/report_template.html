<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥çƒ­é—¨æ•°æ®æŠ¥å‘Š</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='fireGrad' x1='0%25' y1='100%25' x2='0%25' y2='0%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff6b35'/%3E%3Cstop offset='50%25' style='stop-color:%23f7931e'/%3E%3Cstop offset='100%25' style='stop-color:%23ffcc00'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23fireGrad)' d='M50 5 C35 25 25 40 25 55 C25 70 35 80 50 80 C65 80 75 70 75 55 C75 40 65 25 50 5 Z M50 20 C55 35 60 45 60 55 C60 65 55 70 50 70 C45 70 40 65 40 55 C40 45 45 35 50 20 Z'/%3E%3Ccircle cx='50' cy='50' r='12' fill='%23fff' opacity='0.3'/%3E%3C/svg%3E" type="image/svg+xml">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #24292e 0%, #58a6ff 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        /* Tabæ ·å¼ */
        .tabs {
            display: flex;
            background: #f6f8fa;
            border-bottom: 2px solid #e1e4e8;
            padding: 0 20px;
        }

        .tab {
            padding: 18px 30px;
            cursor: pointer;
            font-size: 1.05em;
            font-weight: 500;
            color: #586069;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab:hover {
            color: #0366d6;
            background: rgba(88, 166, 255, 0.1);
        }

        .tab.active {
            color: #0366d6;
            border-bottom-color: #0366d6;
            background: white;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 1.6em;
            color: #24292e;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #58a6ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th {
            background: #f6f8fa;
            color: #24292e;
            font-weight: 600;
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid #e1e4e8;
            cursor: pointer;
            user-select: none;
            position: relative;
            vertical-align: middle;
        }

        th:hover {
            background: #e1e4e8;
        }

        th.sortable::after {
            content: 'â†•';
            margin-left: 5px;
            opacity: 0.3;
        }

        th.sort-asc::after {
            content: 'â†‘';
            opacity: 1;
            color: #0366d6;
        }

        th.sort-desc::after {
            content: 'â†“';
            opacity: 1;
            color: #0366d6;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #e1e4e8;
            text-align: left;
            vertical-align: middle;
        }

        .published-date {
            text-align: left !important;
            vertical-align: middle;
            color: #586069;
        }

        tr:hover {
            background: #f6f8fa;
        }

        .repo-name:hover {
            text-decoration: underline;
        }

        .stars {
            color: #e3b341;
            font-weight: 600;
        }

        .language {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .lang-python { background: #3572A5; color: white; }
        .lang-javascript { background: #f1e05a; color: #333; }
        .lang-typescript { background: #2b7489; color: white; }
        .lang-go { background: #00ADD8; color: white; }
        .lang-rust { background: #dea584; color: #333; }
        .lang-java { background: #b07219; color: white; }
        .lang-cpp { background: #f34b7d; color: white; }
        .lang-other { background: #e1e4e8; color: #333; }

        .description {
            color: #586069;
            max-width: 300px;
            line-height: 1.5;
            word-wrap: break-word;
            word-break: break-word;
        }

        .repo-name {
            color: #0366d6;
            font-weight: 600;
            text-decoration: none;
            max-width: 300px;
            line-height: 1.4;
            word-wrap: break-word;
            word-break: break-word;
            display: inline-block;
        }

        .paper-title {
            color: #0366d6;
            font-weight: 500;
            max-width: 250px;
            line-height: 1.5;
            word-wrap: break-word;
            word-break: break-word;
        }

        .summary {
            color: #666;
            font-size: 0.9em;
            max-width: 800px;
            line-height: 1.6;
            word-wrap: break-word;
            word-break: break-word;
            white-space: normal;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            background: linear-gradient(135deg, #f25d8e 0%, #fb923c 100%);
            color: white;
        }

        .paper-title {
            color: #0366d6;
            font-weight: 500;
            max-width: 350px;
            line-height: 1.5;
            word-wrap: break-word;
            word-break: break-word;
        }

        .authors {
            color: #586069;
            font-size: 0.9em;
            max-width: 250px;
            line-height: 1.4;
        }

        .summary {
            color: #666;
            font-size: 0.9em;
            max-width: 750px;
            line-height: 1.6;
            word-wrap: break-word;
            word-break: break-word;
            white-space: normal;
        }

        .arxiv-cat {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            background: linear-gradient(135deg, #b31b1b 0%, #ff6b6b 100%);
            color: white;
        }

        .arxiv-link {
            color: #b31b1b;
            font-weight: 600;
            text-decoration: none;
            margin-right: 10px;
        }

        .arxiv-link:hover {
            text-decoration: underline;
        }

        .pdf-link {
            color: #e3b341;
            font-weight: 600;
            text-decoration: none;
        }

        .pdf-link:hover {
            text-decoration: underline;
        }

        .growth {
            color: #28a745;
            font-weight: 600;
        }

        .footer {
            background: #f6f8fa;
            padding: 20px;
            text-align: center;
            color: #586069;
            font-size: 0.9em;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #586069;
        }

        .empty-state .emoji {
            font-size: 3em;
            margin-bottom: 10px;
        }

        /* éšè—GitHubå’ŒBç«™è¡¨æ ¼çš„ç¬¬ä¸€åˆ—ï¼ˆæ’ååˆ—ï¼‰ï¼Œä¸éšè—è®ºæ–‡è¡¨æ ¼ */
        #github table tr td:first-child,
        #github table tr th:first-child,
        #bilibili table tr td:first-child,
        #bilibili table tr th:first-child {
            display: none;
        }

        /* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* æš—è‰²æ¨¡å¼ */
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        body.dark-mode .container {
            background: #1a1a2e;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        body.dark-mode .header {
            background: linear-gradient(135deg, #0f3460 0%, #1f4068 100%);
        }

        body.dark-mode .tabs {
            background: #16213e;
            border-bottom-color: #333;
        }

        body.dark-mode .tab {
            color: #e0e0e0;
        }

        body.dark-mode .tab:hover {
            color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        body.dark-mode .tab.active {
            color: #4CAF50;
            border-bottom-color: #4CAF50;
            background: #1a1a2e;
        }

        body.dark-mode .section-title {
            color: #e0e0e0;
            border-bottom-color: #4CAF50;
        }

        body.dark-mode th {
            background: #1f4068;
            color: #e0e0e0;
            border-bottom-color: #333;
        }

        body.dark-mode th:hover {
            background: #16213e;
        }

        body.dark-mode td {
            border-bottom-color: #333;
        }

        body.dark-mode tr:hover {
            background: #16213e;
        }

        body.dark-mode .repo-name {
            color: #4CAF50;
        }

        body.dark-mode .description {
            color: #b0b0b0;
        }

        body.dark-mode .authors {
            color: #b0b0b0;
        }

        body.dark-mode .summary {
            color: #999;
        }

        body.dark-mode .footer {
            background: #16213e;
            color: #b0b0b0;
        }

        body.dark-mode .empty-state {
            color: #b0b0b0;
        }

        /* æš—è‰²æ¨¡å¼ä¸‹çš„è¯­è¨€æ ‡ç­¾ä¼˜åŒ– */
        body.dark-mode .lang-javascript {
            background: #f1e05a;
            color: #333;
        }

        body.dark-mode .lang-other {
            background: #555;
            color: #e0e0e0;
        }

        /* æš—è‰²æ¨¡å¼ä¸‹çš„é“¾æ¥ä¼˜åŒ– */
        body.dark-mode .arxiv-link {
            color: #ff6b6b;
        }

        body.dark-mode .pdf-link {
            color: #ffd93d;
        }

        /* æš—è‰²æ¨¡å¼ä¸‹çš„çº¸å¼ æ ‡é¢˜ä¼˜åŒ– */
        body.dark-mode .paper-title {
            color: #4CAF50;
            line-height: 1.5;
            word-wrap: break-word;
            word-break: break-word;
        }

        /* æš—è‰²æ¨¡å¼ä¸‹çš„æ’­æ”¾é‡ã€ç‚¹èµç­‰æ•°å­—ä¼˜åŒ– */
        body.dark-mode td:nth-child(4),
        body.dark-mode td:nth-child(5) {
            color: #e0e0e0;
        }

        body.dark-mode .stars {
            color: #ffd93d;
        }

        body.dark-mode .growth {
            color: #4CAF50;
        }

        /* æš—è‰²æ¨¡å¼ä¸‹çš„UPä¸»ã€åˆ†ç±»ç­‰ä¼˜åŒ– */
        body.dark-mode td:nth-child(3),
        body.dark-mode td:nth-child(6) {
            color: #b0b0b0;
        }

        .refresh-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,123,255,0.3);
            transition: all 0.3s;
            z-index: 999;
        }

        .refresh-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        body.dark-mode .error {
            background: #4a1a1a;
            border: 1px solid #6b1a1a;
            color: #ff6b6b;
        }

        body.dark-mode .loading {
            color: #b0b0b0;
        }

        .last-updated {
            text-align: center;
            color: #586069;
            font-size: 0.9em;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
        }

        body.dark-mode .last-updated {
            color: #b0b0b0;
            border-top-color: #333;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" id="themeToggle" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>

    <div class="container">
        <div class="header">
            <h1>ğŸ”¥ æ¯æ—¥çƒ­é—¨æ•°æ®æŠ¥å‘Š</h1>
            <p>ç”Ÿæˆæ—¶é—´: <span id="last-updated">--</span></p>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="github">
                <span>ğŸ“Š</span> GitHubçƒ­é—¨
            </div>
            <div class="tab" data-tab="github-weekly-growth">
                <span>ğŸ”¥</span> GitHubæœ¬å‘¨å¢é•¿
            </div>
            <div class="tab" data-tab="ai">
                <span>ğŸ¤–</span> AIçƒ­é—¨
            </div>
            <div class="tab" data-tab="bilibili">
                <span>ğŸ¬</span> Bç«™çƒ­é—¨
            </div>
            <div class="tab" data-tab="arxiv-biology">
                <span>ğŸ§¬</span> ArXivç”Ÿç‰©åˆ†ç±»
            </div>
            <div class="tab" data-tab="arxiv-computer-ai">
                <span>ğŸ¤–</span> ArXivè®¡ç®—æœº-äººå·¥æ™ºèƒ½åˆ†ç±»
            </div>
        </div>

        <div class="tab-content active" id="github">
            <div class="section-title">
                <span>ğŸ“Š</span> GitHubæœ¬å‘¨çƒ­é—¨é¡¹ç›® TOP 20
            </div>
            <div id="github-content">
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </div>

        <div class="tab-content" id="bilibili">
            <div class="section-title">
                <span>ğŸ¬</span> Bç«™æœ¬å‘¨çƒ­é—¨è§†é¢‘ TOP 20
            </div>
            <div id="bilibili-content">
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </div>

        <div class="tab-content" id="arxiv-biology">
            <div class="section-title">
                <span>ğŸ§¬</span> ArXivç”Ÿç‰©åˆ†ç±»è®ºæ–‡ TOP 15
            </div>
            <div id="arxiv-biology-content">
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </div>

        <div class="tab-content" id="arxiv-computer-ai">
            <div class="section-title">
                <span>ğŸ¤–</span> ArXivè®¡ç®—æœº-äººå·¥æ™ºèƒ½åˆ†ç±»è®ºæ–‡ TOP 15
            </div>
            <div id="arxiv-computer-ai-content">
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </div>

        <div class="tab-content" id="github-weekly-growth">
            <div class="section-title">
                <span>ğŸ”¥</span> GitHubæœ¬å‘¨å¢é•¿é¡¹ç›® TOP 20
            </div>
            <div id="github-weekly-growth-content">
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </div>

        <div class="tab-content" id="ai">
            <div class="section-title">
                <span>ğŸ¤–</span> AIé¢†åŸŸçƒ­é—¨é¡¹ç›® TOP 20
            </div>
            <div id="ai-content">
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </div>

        <div class="footer">
            <p>æ•°æ®æ¥æº: GitHub Trending, GitHubæœ¬å‘¨å¢é•¿, AIçƒ­é—¨, Bç«™çƒ­é—¨, ArXivè®ºæ–‡</p>
        </div>
    </div>

    <button class="refresh-btn" onclick="refreshData()">ğŸ”„ åˆ·æ–°æ•°æ®</button>

    <script>
        // é¡µé¢åŠ è½½æ—¶è·å–æ•°æ®
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            initTabs();
            initThemeToggle();
        });

        // åˆå§‹åŒ–æ ‡ç­¾é¡µ
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰æ´»è·ƒçŠ¶æ€
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // æ·»åŠ å½“å‰æ´»è·ƒçŠ¶æ€
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // åˆå§‹åŒ–ä¸»é¢˜åˆ‡æ¢
        function initThemeToggle() {
            const themeToggle = document.getElementById('themeToggle');
            const body = document.body;
            
            // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„ä¸»é¢˜è®¾ç½®
            if (localStorage.getItem('darkMode') === 'true') {
                body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸';
            }
            
            themeToggle.addEventListener('click', function() {
                body.classList.toggle('dark-mode');
                const isDarkMode = body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', isDarkMode);
                themeToggle.textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™';
            });
        }

        // åŠ è½½æ•°æ®
        function loadData() {
            Promise.all([
                fetchGitHubData(),
                fetchGitHubWeeklyGrowthData(),
                fetchAiData(),
                fetchBilibiliData(),
                fetchArxivBiologyData(),
                fetchArxivComputerAiData()
            ]).then(() => {
                updateLastUpdated();
            });
        }

        // è·å–GitHubæ•°æ®
        function fetchGitHubData() {
            return fetch('/api/github_trending')
                .then(response => {
                    if (!response.ok) throw new Error('GitHubæ•°æ®åŠ è½½å¤±è´¥');
                    return response.json();
                })
                .then(data => {
                    // å¤„ç†æ•°æ®ç»“æ„ï¼šdata.repos
                    const repos = data.repos || data;
                    displayGitHubData(repos);
                })
                .catch(error => {
                    displayError('github-content', 'GitHubæ•°æ®åŠ è½½å¤±è´¥: ' + error.message);
                });
        }

        // è·å–GitHubæœ¬å‘¨å¢é•¿æ•°æ®
        function fetchGitHubWeeklyGrowthData() {
            return fetch('/api/github_weekly_growth')
                .then(response => {
                    if (!response.ok) throw new Error('GitHubæœ¬å‘¨å¢é•¿æ•°æ®åŠ è½½å¤±è´¥');
                    return response.json();
                })
                .then(data => {
                    // å¤„ç†æ•°æ®ç»“æ„ï¼šdata.repos
                    const repos = data.repos || data;
                    displayGitHubWeeklyGrowthData(repos);
                })
                .catch(error => {
                    displayError('github-weekly-growth-content', 'GitHubæœ¬å‘¨å¢é•¿æ•°æ®åŠ è½½å¤±è´¥: ' + error.message);
                });
        }

        // è·å–AIæ•°æ®
        function fetchAiData() {
            return fetch('/api/ai_trending')
                .then(response => {
                    if (!response.ok) throw new Error('AIæ•°æ®åŠ è½½å¤±è´¥');
                    return response.json();
                })
                .then(data => {
                    // å¤„ç†æ•°æ®ç»“æ„ï¼šdata.repos
                    const repos = data.repos || data;
                    displayAiData(repos);
                })
                .catch(error => {
                    displayError('ai-content', 'AIæ•°æ®åŠ è½½å¤±è´¥: ' + error.message);
                });
        }

        // è·å–Bç«™æ•°æ®
        function fetchBilibiliData() {
            return fetch('/api/bilibili_trending')
                .then(response => {
                    if (!response.ok) throw new Error('Bç«™æ•°æ®åŠ è½½å¤±è´¥');
                    return response.json();
                })
                .then(data => {
                    // å¤„ç†æ•°æ®ç»“æ„ï¼šdata.videos æˆ–ç›´æ¥æ•°ç»„
                    const items = data.videos || data;
                    displayBilibiliData(items);
                })
                .catch(error => {
                    displayError('bilibili-content', 'Bç«™æ•°æ®åŠ è½½å¤±è´¥: ' + error.message);
                });
        }

        // è·å–ArXivç”Ÿç‰©åˆ†ç±»æ•°æ®
        function fetchArxivBiologyData() {
            return fetch('/api/arxiv_biology')
                .then(response => {
                    if (!response.ok) throw new Error('ArXivç”Ÿç‰©åˆ†ç±»æ•°æ®åŠ è½½å¤±è´¥');
                    return response.json();
                })
                .then(data => {
                    // å¤„ç†æ•°æ®ç»“æ„ï¼šdata.papers æˆ–ç›´æ¥æ•°ç»„
                    const papers = data.papers || data;
                    displayArxivData('arxiv-biology-content', papers);
                })
                .catch(error => {
                    displayError('arxiv-biology-content', 'ArXivç”Ÿç‰©åˆ†ç±»æ•°æ®åŠ è½½å¤±è´¥: ' + error.message);
                });
        }

        // è·å–ArXivè®¡ç®—æœº-äººå·¥æ™ºèƒ½åˆ†ç±»æ•°æ®
        function fetchArxivComputerAiData() {
            return fetch('/api/arxiv_computer_ai')
                .then(response => {
                    if (!response.ok) throw new Error('ArXivè®¡ç®—æœº-äººå·¥æ™ºèƒ½åˆ†ç±»æ•°æ®åŠ è½½å¤±è´¥');
                    return response.json();
                })
                .then(data => {
                    // å¤„ç†æ•°æ®ç»“æ„ï¼šdata.papers æˆ–ç›´æ¥æ•°ç»„
                    const papers = data.papers || data;
                    displayArxivData('arxiv-computer-ai-content', papers);
                })
                .catch(error => {
                    displayError('arxiv-computer-ai-content', 'ArXivè®¡ç®—æœº-äººå·¥æ™ºèƒ½åˆ†ç±»æ•°æ®åŠ è½½å¤±è´¥: ' + error.message);
                });
        }

        // æ˜¾ç¤ºGitHubæ•°æ®
        function displayGitHubData(data) {
            const container = document.getElementById('github-content');
            if (!data || data.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="emoji">ğŸ“­</div><div>æš‚æ— æ•°æ®</div></div>';
                return;
            }

            const html = `
                <table>
                    <thead>
                        <tr>
                            <th class="sortable">æ’å</th>
                            <th class="sortable">é¡¹ç›®åç§°</th>
                            <th class="sortable">æè¿°</th>
                            <th class="sortable">â­ Stars</th>
                            <th class="sortable">è¯­è¨€</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.slice(0, 20).map((repo, index) => `
                            <tr>
                                <td>#${index + 1}</td>
                                <td><a href="${repo.url || '#'}" class="repo-name" target="_blank">${repo.name || repo.title}</a></td>
                                <td class="description">${repo.description || 'æš‚æ— æè¿°'}</td>
                                <td class="stars" data-value="${repo.stars || 0}">â­ ${repo.stars || 0}</td>
                                <td><span class="language lang-${getLanguageClass(repo.language)}">${repo.language || 'Other'}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            container.innerHTML = html;
            initTableSorting('github-content');
        }

        // æ˜¾ç¤ºBç«™æ•°æ®
        function displayBilibiliData(data) {
            const container = document.getElementById('bilibili-content');
            if (!data || data.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="emoji">ğŸ“­</div><div>æš‚æ— æ•°æ®</div></div>';
                return;
            }

            const html = `
                <table>
                    <thead>
                        <tr>
                            <th class="sortable">æ’å</th>
                            <th class="sortable">è§†é¢‘æ ‡é¢˜</th>
                            <th class="sortable">UPä¸»</th>
                            <th class="sortable">æ’­æ”¾é‡</th>
                            <th class="sortable">ç‚¹èµ</th>
                            <th class="sortable">åˆ†ç±»</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.slice(0, 20).map((video, index) => `
                            <tr>
                                <td>#${index + 1}</td>
                                <td><a href="${video.url || '#'}" class="repo-name" target="_blank">${video.title || video.name}</a></td>
                                <td>${video.owner || 'æœªçŸ¥UPä¸»'}</td>
                                <td data-value="${video.view || 0}">ğŸ‘ï¸ ${video.view || 0}</td>
                                <td data-value="${video.like || 0}">ğŸ‘ ${video.like || 0}</td>
                                <td><span class="badge">${video.category || 'å…¶ä»–'}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            container.innerHTML = html;
            initTableSorting('bilibili-content');
        }

        // æ˜¾ç¤ºArXivæ•°æ®
        function displayArxivData(containerId, data) {
            const container = document.getElementById(containerId);
            if (!data || data.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="emoji">ğŸ“­</div><div>æš‚æ— æ•°æ®</div></div>';
                return;
            }

            const html = `
                <table>
                    <thead>
                        <tr>
                            <th class="sortable">æ ‡é¢˜</th>
                            <th class="sortable">ä½œè€…</th>
                            <th class="sortable">å‘å¸ƒæ—¥æœŸ</th>
                            <th class="sortable">åˆ†ç±»</th>
                            <th class="sortable">æ‘˜è¦</th>
                            <th class="sortable">é“¾æ¥</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.slice(0, 15).map(paper => `
                            <tr>
                                <td class="paper-title">${paper.title || paper.name}</td>
                                <td class="authors">${Array.isArray(paper.authors) ? paper.authors.join(', ') : (paper.authors || 'æœªçŸ¥ä½œè€…')}</td>
                                <td class="published-date">${paper.date || paper.published || paper.updated_at || ''}</td>
                                <td><span class="arxiv-cat">${paper.category || paper.categories || 'N/A'}</span></td>
                                <td class="summary">${paper.summary || paper.abstract || 'æš‚æ— æ‘˜è¦'}</td>
                                <td>
                                    <a href="${paper.url || '#'}" target="_blank" class="arxiv-link">arXiv</a>
                                    ${paper.pdf_url ? `<a href="${paper.pdf_url}" target="_blank" class="pdf-link">PDF</a>` : ''}
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            container.innerHTML = html;
            initTableSorting(containerId);
        }

        // æ˜¾ç¤ºGitHubæœ¬å‘¨å¢é•¿æ•°æ®
        function displayGitHubWeeklyGrowthData(data) {
            const container = document.getElementById('github-weekly-growth-content');
            if (!data || data.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="emoji">ğŸ“­</div><div>æš‚æ— æ•°æ®</div></div>';
                return;
            }

            const html = `
                <table>
                    <thead>
                        <tr>
                            <th class="sortable">æ’å</th>
                            <th class="sortable">é¡¹ç›®åç§°</th>
                            <th class="sortable">æè¿°</th>
                            <th class="sortable">æœ¬å‘¨æ–°å¢ â­</th>
                            <th class="sortable">æ€»Stars</th>
                            <th class="sortable">è¯­è¨€</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.slice(0, 20).map((repo, index) => `
                            <tr>
                                <td>#${index + 1}</td>
                                <td><a href="${repo.url || '#'}" class="repo-name" target="_blank">${repo.name || repo.title}</a></td>
                                <td class="description">${repo.description || 'æš‚æ— æè¿°'}</td>
                                <td class="growth" data-value="${repo.current_period_stars || repo.growth || 0}">ğŸ”¥ +${repo.current_period_stars || repo.growth || 0}</td>
                                <td class="stars" data-value="${repo.stars || 0}">â­ ${repo.stars || 0}</td>
                                <td><span class="language lang-${getLanguageClass(repo.language)}">${repo.language || 'Other'}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            container.innerHTML = html;
            initTableSorting('github-weekly-growth-content');
        }

        // æ˜¾ç¤ºAIæ•°æ®
        function displayAiData(data) {
            const container = document.getElementById('ai-content');
            if (!data || data.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="emoji">ğŸ“­</div><div>æš‚æ— æ•°æ®</div></div>';
                return;
            }

            const html = `
                <table>
                    <thead>
                        <tr>
                            <th class="sortable">æ’å</th>
                            <th class="sortable">é¡¹ç›®åç§°</th>
                            <th class="sortable">æè¿°</th>
                            <th class="sortable">â­ Stars</th>
                            <th class="sortable">è¯­è¨€</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.slice(0, 20).map((repo, index) => `
                            <tr>
                                <td>#${index + 1}</td>
                                <td><a href="${repo.url || '#'}" class="repo-name" target="_blank">${repo.name || repo.title}</a></td>
                                <td class="description">${repo.description || 'æš‚æ— æè¿°'}</td>
                                <td class="stars" data-value="${repo.stars || 0}">â­ ${repo.stars || 0}</td>
                                <td><span class="language lang-${getLanguageClass(repo.language)}">${repo.language || 'Other'}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            container.innerHTML = html;
            initTableSorting('ai-content');
        }

        // è·å–è¯­è¨€å¯¹åº”çš„CSSç±»
        function getLanguageClass(language) {
            const langMap = {
                'Python': 'python',
                'JavaScript': 'javascript',
                'TypeScript': 'typescript',
                'Go': 'go',
                'Rust': 'rust',
                'Java': 'java',
                'C++': 'cpp'
            };
            return langMap[language] || 'other';
        }

        // åˆå§‹åŒ–è¡¨æ ¼æ’åº
        function initTableSorting(containerId) {
            const container = document.getElementById(containerId);
            const table = container.querySelector('table');
            if (!table) return;

            const headers = table.querySelectorAll('th.sortable');
            headers.forEach((header, index) => {
                header.addEventListener('click', () => {
                    sortTable(table, index);
                });
            });
        }

        // æ’åºè¡¨æ ¼
        function sortTable(table, columnIndex) {
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            const header = table.querySelectorAll('th')[columnIndex];

            // åˆ‡æ¢æ’åºæ–¹å‘
            const currentSort = header.getAttribute('data-sort') || 'none';
            const newSort = currentSort === 'asc' ? 'desc' : 'asc';

            // ç§»é™¤æ‰€æœ‰è¡¨å¤´çš„æ’åºçŠ¶æ€
            table.querySelectorAll('th').forEach(th => {
                th.removeAttribute('data-sort');
                th.classList.remove('sort-asc', 'sort-desc');
            });

            // è®¾ç½®å½“å‰è¡¨å¤´çš„æ’åºçŠ¶æ€
            header.setAttribute('data-sort', newSort);
            header.classList.add(`sort-${newSort}`);

            // æ’åºè¡Œ
            rows.sort((a, b) => {
                const aCell = a.querySelectorAll('td')[columnIndex];
                const bCell = b.querySelectorAll('td')[columnIndex];

                // ä¼˜å…ˆä½¿ç”¨ data-value å±æ€§è¿›è¡Œæ’åºï¼ˆç”¨äºæ•°å­—ï¼‰
                const aValue = aCell.getAttribute('data-value');
                const bValue = bCell.getAttribute('data-value');

                if (aValue !== null && bValue !== null) {
                    // æ•°å­—æ’åº
                    return newSort === 'asc' ? parseFloat(aValue) - parseFloat(bValue) : parseFloat(bValue) - parseFloat(aValue);
                } else {
                    // æ–‡æœ¬æ’åº
                    const aText = aCell.textContent.trim();
                    const bText = bCell.textContent.trim();
                    if (newSort === 'asc') {
                        return aText.localeCompare(bText);
                    } else {
                        return bText.localeCompare(aText);
                    }
                }
            });

            // é‡æ–°æ’å…¥æ’åºåçš„è¡Œ
            rows.forEach(row => tbody.appendChild(row));
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function displayError(containerId, message) {
            const container = document.getElementById(containerId);
            container.innerHTML = `<div class="error">${message}</div>`;
        }

        // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
        function updateLastUpdated() {
            const now = new Date();
            const timeString = now.toLocaleString('zh-CN');
            document.getElementById('last-updated').textContent = timeString;
        }

        // åˆ·æ–°æ•°æ®
        function refreshData() {
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            document.getElementById('github-content').innerHTML = '<div class="loading">åŠ è½½ä¸­...</div>';
            document.getElementById('github-weekly-growth-content').innerHTML = '<div class="loading">åŠ è½½ä¸­...</div>';
            document.getElementById('ai-content').innerHTML = '<div class="loading">åŠ è½½ä¸­...</div>';
            document.getElementById('bilibili-content').innerHTML = '<div class="loading">åŠ è½½ä¸­...</div>';
            document.getElementById('arxiv-biology-content').innerHTML = '<div class="loading">åŠ è½½ä¸­...</div>';
            document.getElementById('arxiv-computer-ai-content').innerHTML = '<div class="loading">åŠ è½½ä¸­...</div>';
            
            loadData();
        }
    </script>
</body>
</html>